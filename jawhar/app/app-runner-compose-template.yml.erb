version: '2.3'
services:
  runner:
    image: aimannajjar/hurracloud:app-runner-v1
    user: root
    volumes:
      - <%=host_app_path%>/../../../app-runner/package.json:/usr/src/app-runner/package.json # remove
      - <%=host_app_path%>/../../../app-runner/client:/usr/src/app-runner/client # remove
      - <%=host_app_path%>/../../../app-runner/server:/usr/src/app-runner/server # remove
      - <%=host_app_path%>/CONTENT/ui:/usr/src/app-runner/client/src/HurraApp
      - <%=host_app_path%>/CONTENT/backend:/usr/src/app-runner/server/HurraApp
      - <%=host_app_path%>/db:/var/hurradb

    ports:
      - <%=port_number%>:3000
    networks:
      - runner
    environment:
      - NODE_ENV=development
      - REACT_APP_AUID=<%=app_unique_id%>
      - REACT_APP_JAWHAR_API=http://172.22.0.1:5000
    command: sh -c "yarn install_deps && yarn startRunner"    


networks:
  runner:
    ipam:
      config:
        - subnet: 172.22.0.0/16

